// Adapted from https://github.com/microsoft/vscode-dev-containers/tree/main/containers/elixir-phoenix-postgres
{
  "name": "Elixir, Phoenix, Node.js",
  "build": {
    "dockerfile": "Dockerfile",
    "args": {
      // This arg controls the Elixir version.
      "VARIANT": "1.13.1",
      // This arg controls the `mix phx_new` task version that creates a new Phoenix project.
      // (Unlikely to be used for pre-existing Phoenix projects ported to Devcontainer development)
      "PHX_NEW_VERSION": "1.6.6",
      // This arg controls the Node.js version.
      // "NODE_VERSION": "16.13.1"
    }
  },
  // Pass environment variables into the container from a .env file
  "runArgs": [
    "--env-file",
    ".devcontainer/devcontainer.env"
  ],
  // Set *default* container specific settings.json values on container create.
  "settings": {
    "terminal.integrated.profiles.linux": {
      "zsh": {
        "path": "/bin/zsh"
      }
    },
    "terminal.integrated.defaultProfile.linux": "zsh"
  },
  // Add the IDs of extensions you want installed when the container is created.
  "extensions": [
    "jakebecker.elixir-ls"
  ],
  // Use 'forwardPorts' to make a list of ports inside the container available locally.
  "forwardPorts": [
    4000
  ],
  // Use 'postCreateCommand' to run commands after the container is created.
  "postCreateCommand": "mix deps.get && npm --prefix assets install",
  // Uncomment to connect as a non-root user. See https://aka.ms/vscode-remote/containers/non-root.
  "remoteUser": "vscode"
}
